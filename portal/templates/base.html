<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="UTF-8">
    <meta name="google" content="notranslate">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SLATE CI Portal, Services Layer at the Edge and the Mobility of Capability">
    <meta name="author" content="Jeremy Van">
    {# Favicons for SLATE #}
    <link rel="apple-touch-icon" sizes="180x180" href="{{url_for('static', filename='img/favicons/apple-touch-icon.png')}}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{url_for('static', filename='img/favicons/favicon-32x32.png')}}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{url_for('static', filename='img/favicons/favicon-16x16.png')}}">
    <link rel="manifest" href="{{url_for('static', filename='img/favicons/site.webmanifest')}}">
    <link rel="mask-icon" href="{{url_for('static', filename='img/favicons/safari-pinned-tab.svg')}}" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <title>SLATE - {%block title%}{%endblock%}</title>

    {# CSS files #}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">
    <!-- Custom styles for this template -->
    <link href="{{url_for('static', filename='css/style.css')}}" rel="stylesheet">
    <link href="{{url_for('static', filename='css/error.css')}}" rel="stylesheet">
    <!-- Font Awesome Icons and International Telephone input -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link rel="stylesheet" href="{{url_for('static', filename='css/intlTelInput.css')}}">

    {# Custom Fonts #}
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    {# JavaScript files #}
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.compatibility.min.js"></script>

    <!-- Custom JavaScript for this theme -->
    <script type="text/javascript" src="{{url_for('static', filename='js/scrolling-nav.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/intlTelInput.js')}}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/remarkable/1.7.4/remarkable.js"></script>
    <script>
      window.onresize = contentDisplay;
      window.onload = contentDisplay;
      // function to highlight selected nav menu
    	$(document).ready(function() {
      	// get current URL path and assign 'active' class
      	var pathname = window.location.pathname;
      	var pathsplit = pathname.split('/')
      	// console.log(pathsplit[1])
      	if(pathsplit.length > 1){
      		var parentpath = pathsplit[1];
      		$('nav > div > ul > li > a[href="/'+parentpath+'"]').parent().addClass('active');
      	} else {
      		// look to update the full a[href=''] uri below
      		$('nav > div > ul > li > a[href="'+pathname+'"]').parent().addClass('active');
      	}
    	})
      // function to change css width based on session authentication
      $(document).ready(contentDisplay);
      function contentDisplay(){
        var sideNav = document.getElementById('sidenav');
        // console.log(sideNav);
        if (sideNav === null) {
          document.getElementById('content').style.marginLeft = '0px';
        } else {
          if (window.innerWidth > 1000) {
            var sideNavWidth = String(document.getElementById('sidenav').offsetWidth) + 'px';
            document.getElementById('content').style.marginLeft = sideNavWidth;
          } else {
            document.getElementById('content').style.marginLeft = '0px';
          }
        };
      };
      $(document).ready(function(){
        $('#myTable').dataTable();
      });
      $("#demo").intlTelInput();
  	</script>

    <style>
	   [v-cloak] {display: none}
     #loader { 
          border: 12px solid #f3f3f3; 
          border-radius: 50%; 
          border-top: 12px solid #444444; 
          width: 70px; 
          height: 70px; 
          animation: spin 1s linear infinite; 
          z-index: 5;
      } 
        
      @keyframes spin { 
          100% { 
              transform: rotate(360deg); 
          } 
      } 
        
      .center { 
          position: absolute; 
          top: 0; 
          bottom: 0; 
          left: 0; 
          right: 0; 
          margin: auto; 
      }
    </style>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- production version, optimized for size and speed -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
    <script>
    	//Change delimiters to avoid collision with Flask templates
    	Vue.options.delimiters = ['{[{','}]}'];
    </script>
    <script>
    function loader() {
      var loader = document.getElementById("loader");
      loader.style.display = 'inline';
    }
    </script>

{#    <!-- Global site tag (gtag.js) - Google Analytics -->#}
{#    <script async src=“https://www.googletagmanager.com/gtag/js?id=UA-178362732-2”></script>#}
{#    <script>#}
{#      window.dataLayer = window.dataLayer || [];#}
{#      function gtag(){dataLayer.push(arguments);}#}
{#      gtag('js', new Date());#}
{#      gtag("config", "UA-178362732-2");#}
{#    </script>#}


  </head>
  <body id="page-top">
    <div id="loader" class="center" style='display: none;'></div> 
    <div class="wrapper">
    <!-- Navigation -->
    {% if session.get('is_authenticated') and session.get('user_id') or session.get('slate_portal_user') %}
      <!-- <nav id="sidebar" class="active nav-bar-shadow"> -->
      <!-- <aside class="col-12 col-sm-2 bg-light"> -->
        <nav class="sidenav navbar navbar-expand-custom navbar-light bg-light align-items-start flex-row" id="sidenav">
          <a href class="navbar-toggler" data-toggle="collapse" data-target=".sidebar">
            <span class="navbar-toggler-icon"></span>
          </a>
          <div class="collapse navbar-collapse sidebar">
            <ul class="list-unstyled components flex-column navbar-nav w-100 justify-content-between">
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('dashboard')}}" onclick="loader()"><span class="nav-link-span"><i class="fas fa-columns"></i> Dashboard</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('list_clusters')}}" onclick="loader()"><span class="nav-link-span"><i class="fas fa-cubes"></i> Clusters</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('list_applications')}}" onclick="loader()"><span class="nav-link-span"><i class="fas fa-th"></i> Applications</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('list_secrets')}}" onclick="loader()"><span class="nav-link-span"><i class="fas fa-key"></i> Secrets</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('list_instances')}}" onclick="loader()"><span class="nav-link-span"><i class="fas fa-server"></i> Instances</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('list_volumes')}}" onclick="loader()"><span class="nav-link-span"><i class="fas fa-database"></i> Volumes</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('list_groups')}}" onclick="loader()"><span class="nav-link-span"><i class="fas fa-users"></i> My Groups</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('list_public_groups')}}" onclick="loader()"><span class="nav-link-span"><i class="far fa-object-ungroup"></i> All Groups</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('cli_access')}}" onclick="loader()"><span class="nav-link-span"><i class="fas fa-terminal"></i> CLI Access</span></a>
              </li>
              {% if session['admin'] %}
              <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="{{url_for('view_admin')}}"><span class="nav-link-span"><i class="fas fa-user-shield"></i> Admin View</span></a>
              </li>
              {% endif %}
            </ul>
          </div>
        </nav>
      <!-- </aside> -->
      {% endif %}

      <div id="content" class="col py-3">
        <nav id="topnav" class="navbar navbar-expand-lg navbar-dark fixed-top nav-bar-shadow">
          <div class="container-fluid">
            <form class="form-inline">
              {% if session.get('is_authenticated') and session.get('user_id') %}
              <a class="navbar-brand js-scroll-trigger" href="{{url_for('dashboard')}}" style="padding-left: 15px;">
                <img src="{{url_for('static', filename='img/slate-logo-150.png')}}" width="30" height="30" class="d-inline-block align-top" alt=""> SLATE Portal
              </a>
              {% else %}
              <a class="navbar-brand js-scroll-trigger" href="{{url_for('home')}}" style="padding-left: 15px;">
                <img src="{{url_for('static', filename='img/slate-logo-150.png')}}" width="30" height="30" class="d-inline-block align-top" alt=""> SLATE Portal
              </a>
              {% endif %}
            </form>
            <form class="form-inline">
              {% if session.get('is_authenticated') %}
                {% if session.get('slate_portal_user') %}
              <a class="nav-link js-scroll-trigger" href="#">{{session['name']}}</a>
                {% else %}
              <a class="nav-link js-scroll-trigger" href="{{url_for('profile')}}" id="nav-profile">Profile</a>
                {% endif %}
              <div class="dropdown">
                <button class="btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color: white;">
                  <i class="fas fa-ellipsis-v"></i>
                </button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                  {% if session.get('user_id') %}
                  <a class="nav-link js-scroll-trigger dropdown-item" href="{{url_for('list_applications')}}">Apps</a>
                  {% endif %}
                  <a class="nav-link js-scroll-trigger dropdown-item" href="http://slateci.io/docs/quickstart" target="_blank">Docs</a>
                  <a class="nav-link js-scroll-trigger dropdown-item" href="{{url_for('about_portal')}}">About Portal</a>
                </div>
              </div>
                {% if not session.get('slate_portal_user') %}
              <a class="nav-link js-scroll-trigger" href="{{url_for('logout')}}"><i class="fas fa-sign-out-alt"></i> Logout</a>
                {% endif %}
              {% else %}
              <a class="nav-link js-scroll-trigger" href="{{url_for('list_applications')}}">Apps</a>
              <a class="nav-link js-scroll-trigger" href="https://slateci.io/docs/quickstart/" target="_blank">Docs</a>
              <a class="nav-link js-scroll-trigger" href="{{url_for('login')}}">Login</a>
              <a class="nav-link js-scroll-trigger" href="{{url_for('signup')}}">Sign Up</a>
              {% endif %}
            </form>
          </div>
        </nav>

        <!-- Page body -->
        {%block body%}
        {%endblock%}
      </div>
    </div><!-- Wrapper -->

    <!-- Page footer -->

  </body>
</html>
